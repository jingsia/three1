--升阶消耗
local UpCostType = {
    --步兵
    [1] = {7,1,2,3},
    --骑兵
    [1] = {8,1,2,3},
    --弓兵
    [1] = {9,4,5,6},
    --枪兵
    [1] = {8,1,2,3},
    --谋士
    [1] = {7,4,5,6},
}
local UpCostItem = {0,1,1,2,2,3}

function UpgradeCost(player, cls, index, lev) --玩家 类型 部位 等级
    local package = player:GetPackage()
    if cls > #UpCostType then
        return false
    if index > #UpCostType[cls] then
        return false
    end

    if lev > #UpCostItem then
        lev = #UpCostItem
    end

    --itemId
    local itemId = UpCostType[cls][index] + 10*UpCostItem[lev]
    --count
    local cnt = 5 * (len + 1)

    --for k = 1,#items do
    local count = package:GetItemCount(itemId)
    if count < cnt then
        return false
    end
    --end

    --for k = 1,#items do
    package:DelAllItem(itemId, cnt)
    --end
    return true
end

--士兵升阶
local UpSoldierCost = {
    --武装
    [1]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}}, --步兵
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --士气
    [2]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --体能
    [3]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --身手
    [4]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --纪律
    [5]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --操练
    [6]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
}

function UpgradeSoldierCost(player, cls, index, lev)
    local package = player:GetPackage()
    local cls = player:Get
    if index > #UpSoldierCost then
        return false
    end

    if lev > #UpSoldierCost[index] then
        return false
    end

    if cls > #UpSoldierCost[index][lev] then
        return false
    end

    local items = UpSoldierCost[index][lev][cls]

    for k = 1,#items do
        local count = package:GetItemCount(items[1][1])
        if count < items[1][2] then
            return false
        end
    end

    for k = 1,#items do
        local count = package:DelAllItem(items[1][1], items[1][2])
    end
    return true
end


local EnchantSoldierCost = {
    --武装
    [1]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}}, --步兵
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --士气
    [2]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --体能
    [3]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --身手
    [4]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --纪律
    [5]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
    --操练
    [6]={
        --目标阶数
        [1]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [2]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [3]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
        [4]={
            --物品及数量
            [1]={{1,1},{2,1},{3,1}},
            [2]={{1,1},{2,1},{3,1}}, --骑兵
            [3]={{1,1},{2,1},{3,1}}, --弓兵
            [4]={{1,1},{2,1},{3,1}}, --弓兵
            [5]={{1,1},{2,1},{3,1}}, --枪兵
        },
    },
}

function EnchantSoldierCost(player, cls, index , lev)  --玩家指针，职业，部位，等级
    local package = player:GetPackage()
    local cls = player:Get
    if index > #EnchantSoldierCost then
        return false
    end

    if lev > #EnchantSoldierCost[index] then
        return false
    end

    if cls > #EnchantSoldierCost[index][lev] then
        return false
    end

    local items = EnchantSoldierCost[index][lev][cls]

    for k = 1,#items do
        local count = package:GetItemCount(items[1][1])
        if count < items[1][2] then
            return false
        end
    end

    for k = 1,#items do
        local count = package:DelAllItem(items[1][1], items[1][2])
    end
    return true
end
