-- 第四职业——寻墨相关lua配置
local normalMonster = {
    -- 普通怪物id
    [1] = {9532, 9533, 9534,9535,9536,9537,9538,9539,9540,9541,9542,9543,9544},
    [2] = {9547, 9548, 9549,9550,9551,9552,9553,9554,9555,9556,9557,9558,9559,9560,9561},
    [3] = {9564, 9565, 9566,9567,9568,9569,9570,9571,9572,9573,9574,9575,9576,9577,9578,9579},
    [4] = {9582, 9583, 9584,9585,9586,9587,9588,9589,9590,9591,9592,9593,9594,9595,9596,9597},
	[5] = {9602, 9603, 9604,9605,9606,9607,9608,9609,9610,9611,9612,9613,9614,9615,9616,9617,9618,9619,9620,9621,9622,9623,9624,9625,9626},
	[6] = {9629, 9630, 9631,9632,9633,9634,9635,9636,9637,9638,9639,9640,9641,9642,9643,9644,9645,9646,9647,9648},
	[7] = {9651, 9652,9653,9654,9655,9656,9657,9658,9659,9660,9661,9662,9663,9664,9665,9666,9667,9668,9669,9670},
	[8] = {9673, 9674,9675,9676,9677,9678,9679,9680,9681,9682,9683,9684,9685,9686,9687,9688,9689,9690,9691,9692},
}

local bossMonster = {
    -- Boss id
    [1] = {9545,9546},
    [2] = {9562,9563},
    [3] = {9580,9581},
    [4] = {9598,9599},
	[5] = {9627,9628},
	[6] = {9649,9650},
	[7] = {9671,9672},
	[8] = {9693,9694},
}

local stepAward = {
    {{1325, 1, 1},{9418,2,1},{9414,5,1},{9413,1,1}},
    {{1326, 4, 1},{9418,2,1},{9414,4,1},{9413,1,1}},
    {{1326, 4, 1},{9418,2,1},{9414,4,1},{9413,1,1}},
    {{1326, 2, 1},{9418,2,1},{9413,3,1}},
    {{1326, 2, 1},{9418,2,1},{9413,3,1}},
    {{1326, 1, 1},{9418,2,1},{9413,2,1}},
    {{1326, 1, 1},{9418,2,1},{9413,2,1}},
    {{1326, 1, 1},{9418,2,1},{9413,2,1}},
    {{1326, 1, 1},{9418,2,1},{9413,2,1}},
    {{1326, 1, 1},{9418,2,1},{9413,2,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
    {{1327, 2, 1},{9418,1,1},{9413,1,1}},
}

local treasure1 = {
    -- 副本一宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure2 = {
    -- 副本二宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure3 = {
    -- 副本三宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure4 = {
    -- 副本四宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure5 = {
    -- 副本五宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure6 = {
    -- 副本六宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure7 = {
    -- 副本七宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

local treasure8 = {
    -- 副本八宝箱配置
    {{5001,1,1}},
    {{5011,1,1}},
    {{5021,1,1}},
    {{5031,1,1}},
    {{5041,1,1}},
    {{5051,1,1}},
    {{5061,1,1}},
    {{5071,1,1}},
    {{5081,1,1}},
    {{5091,1,1}},
    {{5101,1,1}},
    {{5111,1,1}},
    {{5121,1,1}},
    {{5131,1,1}},
    {{56,1,1}},
    {{57,1,1}},
    {{1327,1,1}},
    {{133,1,1}},
    {{400,1,1}},
    {{51,1,1}},
    {{49,1,1}},
    {{50,1,1}},
    {{48,1,1}},
    {{509,1,1}},
    {{507,1,1}},
}

-- 宝箱掉落概率配置
local chance1 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance2 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance3 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance4 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance5 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance6 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance7 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}
local chance8 = {200, 300, 400, 500, 600, 700, 800,900,1000,1100,1200,1300,1400,1500,2500,3500,4500,5500,6500,7500,8000,8500,9900,9950,10000}

local treasure = {
    -- 宝箱道具
    [1] = treasure1,
    [2] = treasure2,
    [3] = treasure3,
    [4] = treasure4,
	[5] = treasure5,
	[6] = treasure6,
	[7] = treasure7,
	[8] = treasure8,
}

local chance = {
    -- 宝箱概率
    [1] = chance1,
    [2] = chance2,
    [3] = chance3,
    [4] = chance4,
	[5] = chance5,
	[6] = chance6,
	[7] = chance7,
	[8] = chance8,
}

local lengendMonster = {
    -- 神兽id, 下标为对应的等级，四个为四个等级的副本
    [1]  = {12051, 12052, 12053, 12054},
    [2]  = {12051, 12052, 12053, 12054},
    [3]  = {12051, 12052, 12053, 12054},
    [4]  = {12051, 12052, 12053, 12054},
    [5]  = {12051, 12052, 12053, 12054},
    [6]  = {12051, 12052, 12053, 12054},
    [7]  = {12051, 12052, 12053, 12054},
    [8]  = {12051, 12052, 12053, 12054},
    [9]  = {12051, 12052, 12053, 12054},
    [10] = {12051, 12052, 12053, 12054},
}

local specialItem = {
    -- 材料道具的配置(用于合成梦引)
    [1]  = {9286, 9287, 9288, 9289},
    [2]  = {9291, 9292, 9293, 9294},
    [3]  = {9296, 9297, 9298, 9299},
    [4]  = {9301, 9302, 9303, 9304},
	[5]  = {9461, 9462, 9463, 9464},
	[6]  = {9466, 9467, 9468, 9469},
	[7]  = {9471, 9472, 9473, 9474},
	[8]  = {9887, 9888, 9889, 9890},
}

function getRandomNormalMonster(id)
    if id >= 1 and id <= #normalMonster then
        return normalMonster[id][math.random(1, #(normalMonster[id]))]
    else
        return 0
    end
end

function getBossMonster(id)
    if id >= 1 and id <= #bossMonster then
        return bossMonster[id][math.random(1, #(bossMonster[id]))]
    else
        return 0
    end
end

function getLengendMonster(id, val)
    val = val % 10
    if val > 10 then
        return 0
    end

    if id > #(lengendMonster[val]) and id == 0 then
        return 0
    end
    return lengendMonster[val][id]
end

function calcGridType(prob)
    local chanceType = {20, 75, 90, 95, 100}
    for i = 1, #chanceType do
        if prob <=chanceType[i] then
            return i
        end
    end
    return 0
end

function getTreasure(id)
    -- 获得相应宝箱的道具
    local prob = math.random(1, 10000)
    local chanceTmp = chance[id]
    for i = 1, #chanceTmp do
        if prob <= chanceTmp[i] then
            return treasure[id][i]
        end
    end
    print ("getTreasure error.")
end

function foundCave(id)
    -- 找到山洞后的的散仙ID
    return math.random(123,159)
end

--[[
function getStepAward(step)
    for i = 1, #stepAward do
        if i >= step then
            return stepAward[i]
        end
    end
    return stepAward[#stepAward]
end
]]--

local stepCount = 
{
    1,3,5,10,20
}
local stepAwardID =
{
    [1] = {
        20017, 20018, 20019, 20020, 20021,
    },
    [2] = {
        20022, 20023, 20024, 20025, 20026,
    },
    [3] = {
        20027, 20028, 20029, 20030, 20031,
    },
    [4] = {
        20032, 20033, 20034, 20035, 20036,
    },
	[5] = {
        20037, 20038, 20039, 20040, 20041,
    },
	[6] = {
        20042, 20043, 20044, 20045, 20046,
    },
	[7] = {
        20047, 20048, 20049, 20050, 20051,
    },
	[8] = {
        20052, 20053, 20054, 20055, 20056,
    },
}

function getStepAward(progress, step)
    if progress == 0 then
        print ("error1")
        return 0
    end
    if progress > #stepAwardID then
        print ("error2")
        return 0
    end
    local index = 0
    for i = 1,#stepCount do
        if stepCount[i] >= step then
            return stepAwardID[progress][i]
        end
    end
    return stepAwardID[progress][#stepCount]
end

function getSpecialItem(id, index)
    return specialItem[id][index];
end

